<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.ai_teacher_system_back.mapper.CourseMapper">

<resultMap id="BaseResultMap" type="com.example.ai_teacher_system_back.entity.Course">
    <id column="id" property="id" />
    <result column="name" property="name" />
    <result column="description" property="description" />
    <result column="subject" property="subject" />
    <result column="grade" property="grade" />
    <result column="creator_id" property="creatorId" />
    <result column="create_time" property="createTime" />
    <result column="update_time" property="updateTime" />
</resultMap>

<insert id="insert" parameterType="com.example.ai_teacher_system_back.entity.Course" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO course (
        name, description, subject, grade, creator_id, create_time, update_time
    ) VALUES (
        #{name}, #{description}, #{subject}, #{grade}, #{creatorId}, #{createTime}, #{updateTime}
    )
</insert>

<update id="update" parameterType="com.example.ai_teacher_system_back.entity.Course">
    UPDATE course
    SET name = #{name},
        description = #{description},
        subject = #{subject},
        grade = #{grade},
        update_time = #{updateTime}
    WHERE id = #{id}
</update>

<select id="selectById" resultMap="BaseResultMap">
    SELECT * FROM course WHERE id = #{id}
</select>

<select id="selectByCreatorId" resultMap="BaseResultMap">
    SELECT * FROM course WHERE creator_id = #{creatorId} ORDER BY create_time DESC
</select>

<select id="selectBySubject" resultMap="BaseResultMap">
    SELECT * FROM course WHERE subject = #{subject} ORDER BY create_time DESC
</select>

<select id="selectByGrade" resultMap="BaseResultMap">
    SELECT * FROM course WHERE grade = #{grade} ORDER BY create_time DESC
</select>

<delete id="deleteById">
    DELETE FROM course WHERE id = #{id}
</delete>

</mapper>